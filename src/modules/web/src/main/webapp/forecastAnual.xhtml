<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:model="http://java.sun.com/jsf/composite/model"
	template="/WEB-INF/templates/layout.xhtml">

	<ui:define name="title">
		My Personal Cashflow
	</ui:define>

	<ui:define name="content">
		<h1>My Personal Forecast</h1>
		<h:form id="cashFlowForm">

			<p:panel header="Listado Gastos agrupados por Grupos de Gastos" id="listado2">
				<p:panelGrid id="panelGrupoGastos" columns="1">

				<h3>Gasto Anual por Grupo de Gastos</h3>
				<p:dataTable var="grupoGasto" value="#{forecastController.gastosGrupoGastosAnual}" rowStyleClass="#{grupoGasto.concepto eq 'Total Mensual'? 'importeTotal' : null}" resizableColumns="true"  scrollable="true" >
					<p:ajax event="rowToggle" listener="#{forecastController.selectGrupoGasto(grupoGasto)}" update="tabladetalle" />
					<p:column style="width:16px">
						<p:rowToggler/>
					</p:column>
					<p:column headerText="Tarjeta" width="25%">
						<h:outputText value="#{grupoGasto.concepto}" />
					</p:column>
					<p:column headerText="Enero" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(1)}">
						<h:outputText value="#{grupoGasto.importeMes1}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Febrero" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(2)}">
						<h:outputText value="#{grupoGasto.importeMes2}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Marzo" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(3)}">
						<h:outputText value="#{grupoGasto.importeMes3}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Abril" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(4)}">
						<h:outputText value="#{grupoGasto.importeMes4}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Mayo" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(5)}">
						<h:outputText value="#{grupoGasto.importeMes5}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Junio" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(6)}">
						<h:outputText value="#{grupoGasto.importeMes6}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Julio" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(7)}">
						<h:outputText value="#{grupoGasto.importeMes7}" >
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Agosto" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(8)}">
						<h:outputText value="#{grupoGasto.importeMes8}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Setiembre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(9)}">
						<h:outputText value="#{grupoGasto.importeMes9}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Octubre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(10)}">
						<h:outputText value="#{grupoGasto.importeMes10}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Noviembre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(11)}">
						<h:outputText value="#{grupoGasto.importeMes11}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Diciembre" width="15%">
						<h:outputText value="#{grupoGasto.importeMes12}" style="#{forecastController.getBackgroundColumnaSeleccionada(12)}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>
					<p:column headerText="Importe Total Anual" width="15%">
						<h:outputText value="#{grupoGasto.importeTotalAnual}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>

					<p:rowExpansion>
						<p:panelGrid  columns="1" >
							<f:facet name="header">
								Detalle por Grupo de Gasto
							</f:facet>

							<p:dataTable id="tabladetalle" var="detalleGasto"  resizableColumns="true" value="#{forecastController.detalleGastosPorGrupoGastosAnual}"   scrollable="true" >


								<h:inputHidden id="gastoId" value="#{detalleGasto.id}" />

								<p:column headerText="Concepto" width="40%">
									<h:outputText value="#{detalleGasto.concepto}" />
								</p:column>
								<p:column headerText="Enero" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(1)}">
									<h:outputText value="#{detalleGasto.importeMes1}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Febrero" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(2)}">
									<h:outputText value="#{detalleGasto.importeMes2}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Marzo" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(3)}">
									<h:outputText value="#{detalleGasto.importeMes3}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Abril" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(4)}">
									<h:outputText value="#{detalleGasto.importeMes4}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Mayo" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(5)}">
									<h:outputText value="#{detalleGasto.importeMes5}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Junio" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(6)}">
									<h:outputText value="#{detalleGasto.importeMes6}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Julio" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(7)}">
									<h:outputText value="#{detalleGasto.importeMes7}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Agosto" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(8)}">
									<h:outputText value="#{detalleGasto.importeMes8}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Setiembre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(9)}">
									<h:outputText value="#{detalleGasto.importeMes9}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Octubre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(10)}">
									<h:outputText value="#{detalleGasto.importeMes10}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Noviembre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(11)}">
									<h:outputText value="#{detalleGasto.importeMes11}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column headerText="Diciembre" width="15%" style="#{forecastController.getBackgroundColumnaSeleccionada(12)}">
									<h:outputText value="#{detalleGasto.importeMes12}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>

							</p:dataTable>

						</p:panelGrid>
					</p:rowExpansion>


				</p:dataTable>
				</p:panelGrid>
				</p:panel>
			<br/>
			<p:commandButton value="Actualizar Forecast Tarjetas" action="#{forecastController.actualizarGastosTarjetas}"></p:commandButton>







		</h:form>
	</ui:define>
</ui:composition>